from selenium import webdriver
import time
import os
from selenium.webdriver.firefox.options import Options
from bs4 import BeautifulSoup
import re

countProxy = 0

list_ProxyTest = [
	'52.202.225.44:8888',
	'64.227.8.64:3128',
	'67.205.151.68:8080',
	'167.172.158.160:8080',
	'167.172.252.45:8080',
	'68.183.115.230:3128',
	'134.122.27.64:3128',
	'198.50.177.44:44699',
	'52.179.231.206:80',
	'149.56.1.48:8181',
	'142.44.148.56:8080',
	'178.128.234.120:3128',
	'205.204.94.125:80',
	'147.75.51.179:3128',
	'165.227.39.7:8080',
	'64.235.204.107:8080',
	'34.72.71.121:80',
	'144.121.255.37:8080',
	'159.89.49.60:31264',
	'104.129.196.153:10605',
	'148.153.11.58:39593',
	'40.84.212.11:80',
	'104.129.196.60:10605',
	'13.85.25.59:8080',
	'207.237.148.14:38694',
	'207.244.248.208:3128',
	'52.138.1.43:80',
	'207.237.148.242:8841',
	'165.225.34.80:10605',
	'104.247.51.10:8080',
	'168.169.146.12:8080',
	'199.119.74.35:4145',
	'168.169.96.14:8080',
	'38.142.63.146:31596',
	'185.134.23.196:80',
	'185.134.23.197:80',
	'64.188.3.162:3128',
	'51.91.212.159:3128',
	'5.39.17.96:80',
	'195.154.173.28:80',
	'104.236.26.27:38801',
	'207.164.119.31:4145',
	'173.95.52.188:30756',
	'45.32.144.126:8080',
	'64.118.84.6:37852',
	'51.254.98.24:80',
	'212.47.226.240:3128',
	'107.173.177.134:5836',
	'199.119.74.34:4145',
	'136.243.47.220:3128',
	'213.136.78.253:5836',
	'50.27.184.225:54321',
	'12.109.102.86:64312',
	'201.193.217.227:3128',
	'217.61.127.233:80',
	'206.127.88.18:80',
	'50.250.56.129:48380',
	'217.61.127.153:80',
	'50.235.92.65:32100',
	'217.61.127.34:80',
	'18.216.122.234:20053',
	'52.232.135.221:80',
	'217.61.127.113:80',
	'69.162.66.51:5836',
	'96.44.133.110:58690',
	'217.61.127.19:80',
	'98.143.145.30:62353',
	'217.61.127.14:80',
	'52.179.18.244:8080',
	'216.144.228.130:15378',
	'190.187.253.124:3128',
	'80.211.89.85:3128',
	'185.126.34.202:5836',
	'98.143.145.29:62354',
	'194.5.206.231:8080',
	'212.26.132.68:3128',
	'96.44.183.149:55225',
	'38.123.64.233:31596',
	'191.232.166.211:3128',
	'191.232.212.122:3128',
	'191.238.214.147:80',
	'190.109.196.44:53916',
	'84.201.170.136:8080',
	'216.144.230.233:15993',
	'185.7.77.69:5836',
	'151.106.52.26:5836',
	'96.69.174.252:39593',
	'108.30.209.198:80',
	'190.109.196.41:53916',
	'50.236.148.254:31699',
	'24.37.245.42:44229',
	'192.252.214.17:4145',
	'51.81.31.62:22563',
	'191.232.240.29:80',
	'51.158.29.231:5836',
	'192.252.215.5:4145',
	'212.129.28.214:5836',
	'93.113.207.105:5836',
	'81.201.60.130:80',
	'63.151.9.74:64312',
	'173.82.78.188:5836',
	'71.122.164.51:54321',
	'195.154.42.179:5836',
	'181.225.65.242:4145',
	'185.184.208.150:5836',
	'38.133.200.94:31596',
	'74.85.157.216:4153',
	'200.98.163.118:80',
	'207.144.111.230:64312',
	'201.184.75.210:4145',
	'185.29.11.251:4145',
	'199.115.203.1:30669',
	'200.6.175.10:59341',
	'185.126.34.203:5836',
	'194.244.16.53:35573',
	'49.12.0.103:10046',
	'108.29.77.74:54321',
	'199.115.202.1:30669',
	'46.165.251.102:5836',
	'201.140.103.33:59311',
	'185.220.119.1:4145',
	'45.5.119.86:4153',
	'212.83.128.9:5836',
	'201.184.135.155:4145',
	'200.59.27.70:4145',
	'199.115.201.1:30669',
	'199.127.176.139:64312',
	'24.139.143.82:51327',
	'64.207.95.61:39593',
	'212.83.191.196:5836',
	'190.0.246.170:1080',
	'64.207.92.233:39593',
	'201.148.71.65:1080',
	'181.129.96.35:4145',
	'191.98.193.17:4145',
	'13.52.126.34:20019',
	'176.31.141.21:51327',
	'5.39.200.88:54987',
	'50.204.122.230:64312',
	'105.112.8.53:3128',
	'181.129.49.42:4153',
	'50.250.75.153:39593',
	'54.38.110.35:48034',
	'50.204.122.225:54321',
	'217.172.190.243:5836',
	'190.109.160.73:39734',
	'91.183.53.241:4145',
	'109.167.38.1:4145',
	'190.0.61.19:4145',
	'176.221.73.120:3128']



pathDriver = os.path.dirname(os.path.abspath(__file__)) + "/geckodriver.exe"
opts = Options()
opts.headless = False


for IP in list_ProxyTest:
	driver = webdriver.Firefox(executable_path=pathDriver,options=opts)
	webdriver.DesiredCapabilities.FIREFOX['proxy'] = {
	    "httpProxy": IP,
	    "ftpProxy": IP,
	    "sslProxy": IP,
	    "proxyType": "MANUAL",
		}
	countProxy += 1
	try:
		driver.get('https://2ip.ru/')
		html = driver.page_source
		# print(IP)
		# time.sleep(3)
	except Exception as errMess:
		pass

# Парсим полученную страницу:
	soup = BeautifulSoup(html, 'lxml')
	div_ip = soup.find('div', class_='ip' )
	realIP = div_ip.text.rstrip().lstrip()		# Удаление пробелов в начале и конце строки
	# div_User_Agent = soup.find('div', text='Браузер:')
	# div_Location = soup.find('div', text='Местоположение:')

# Вывод результата:

	print(str(countProxy) + ". " + str(IP))
	print('      proxyIP:  ' + IP)		
	print('      realIP:   ' + realIP)		
	# print('      Браузер: ' + div_User_Agent.nextSibling.text)		
	# print('      Местоположение: ' + div_Location.nextSibling.nextSibling.text)




	driver.close()

print('Всего проверено: '+ str(countProxy))
print('  Найденно:')
print('    прозрачных: '+ str(countTransparentProxy))
print('    анонимных:  '+ str(countAnonymousProxy) + '  или  ' + str(round(countAnonymousProxy/countProxy*100, 1)) + ' %' )

